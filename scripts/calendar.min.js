var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,c){a.raw=c;return a};var gameTypes="B2 B3 B4 B5 B6 B7 D1 D2".split(" "),daysName="Vas\u00e1rnap H\u00e9tf\u0151 Kedd Szerda Cs\u00fct\u00f6rt\u00f6k P\u00e9ntek Szombat".split(" "),gHours=[],allDays=[],freeDays=[],date,newDate=new Date,gDay,betweenDate=[];function accepted(){$(".footer-blocking").hide();$(".footer").hide()}
$(document).ready(function(){$(".backarrow").css("display","none");$(".datearrow").css("display","none");bookingDate=date;var a=new Date,c=a.getFullYear(),b=a.getMonth();a.getDate();a=9<b?b+1:"0"+(b+1);$("#currentDate").text(c+"-"+a);renderDays(c,b)});Date.prototype.addDays=function(a){var c=new Date(this.valueOf());c.setDate(c.getDate()+a);return c};
function renderDays(a,c){$(".calendar-content");$(".calendar-content").html("");var b=new Date;betweenDate.min=b.addDays(-1).getTime();betweenDate.max=b.addDays(14).getTime();for(var d=0;15>d;d++){var e=b.addDays(d),g=void 0==daysName[e.getDay()]?"H\u00e9tf\u0151":daysName[e.getDay()],h=9>e.getMonth()?"0"+Number(e.getMonth()+1):Number(e.getMonth()+1),k=9>e.getDate()?"0"+e.getDate():e.getDate();$(".calendar-content").append('\n    <div class="c-block" onclick="selectDay('+Number(e.getMonth()+1)+","+
e.getDate()+')" ><p style="margin:0.5em" >'+h+"."+k+"</br>"+g+"</p></div>\n    ")}}var selectDay=function(a,c){$(".backarrow").css("display","block");$(".datearrow").css("display","block");gDay=c;var b=new Date;date=b.getFullYear()+"-"+(9>a?"0"+a:a)+"-"+(9>c?"0"+c:c);newDate=new Date(date);$(".calendar-content").html("");$(".calendar-content").addClass("calendar-times").removeClass("calendar-content");getFreePos(date);getOpenHours(date);$("#currentDate").text(date)};
function getOpenHours(a){gHours=[];var c=new Date(a),b=c.getDay();$.post(apiUrl+"getOpenHours.php",{day:b},function(a,c){var b=Number(a.opening),d=a.closing;d=b>d?24-Number(b)+Number(d-1):d-b;for(var e=0;e<d;e+=2){var f=new Date;f.setHours(Number(b)+e);f=f.getHours();gHours.push(f)}})}
function back(){var a=new Date,c=a.getFullYear(),b=a.getMonth();a.getDate();$(".backarrow").css("display","none");$(".datearrow").css("display","none");b=9>b?"0"+Number(b+1):Number(b+1);a=c+"-"+b;$("#currentDate").text(a);$(".calendar-times").html("");$(".calendar-times").addClass("calendar-content").removeClass("calendar-times");renderDays(c,b)}
function getFreePos(a){$.ajax({type:"POST",url:apiUrl+"getReservations.php",data:"data="+JSON.stringify({date:a}),dataType:"JSON",success:function(a){for(var b=[],c=0;c<a.length;c++)b.push({time:Number(a[c].time),gameType:a[c].gameType,free:a[c].free});generateDay(b)},error:function(a){}})}
function generateDay(a){setTimeout(function(){for(var c=[],b=0;b<gHours.length;b++)for(var d=0;d<gameTypes.length;d++)c.push({time:gHours[b],gameType:gameTypes[d]});generateFreeDays(c,a)},100)}function generateFreeDays(a,c){freeDays=[];for(var b=0;b<a.length;b++)for(var d=0;d<c.length;d++)a[b].gameType==c[d].gameType&&a[b].time==c[d].time&&(a[b].free=!1);freeDays=a;generateHtml()}
function generateHtml(){$(".calendar-times").html("");if(0==gHours.length)$(".calendar-times").html("<h3>Ma sajnos z\u00e1rva van</h3>");else{for(var a=0;a<gHours.length;a++)25==Number(gHours[a]+1)?$(".calendar-times").append('\n                <div class="times-table">\n                    <div class="time">\n                        <p>'+gHours[a]+":00  -  1:00</p>\n                    </div>\n                 </div>"):$(".calendar-times").append('\n                <div class="times-table">\n                    <div class="time">\n                        <p>'+
gHours[a]+":00  - "+Number(gHours[a]+2)+":00</p>\n                    </div>\n                 </div>");for(a={$jscomp$loop$prop$i$1$3:0};a.$jscomp$loop$prop$i$1$3<gHours.length;a={$jscomp$loop$prop$i$1$3:a.$jscomp$loop$prop$i$1$3},a.$jscomp$loop$prop$i$1$3++)freeDays.forEach(function(a){return function(b){Number(b.time)===Number(gHours[a.$jscomp$loop$prop$i$1$3])&&(0==b.free?$(".times-table:nth-child("+(a.$jscomp$loop$prop$i$1$3+1)+")").append("<div style = 'background-color:red' class='game-type' onclick = 'alert(`Ez a hely sajnos m\u00e1r foglalt!`)' ><p>"+
b.gameType+"</p></div > "):$(".times-table").eq(a.$jscomp$loop$prop$i$1$3).append("<div class= 'game-type' onclick='getBookingData(`"+b.gameType+"`,"+b.time+")' ><p>"+b.gameType+"</p></div > "))}}(a))}}
function changeCurrentDate(a){if(newDate.addDays(a).getTime()>=betweenDate.min&&newDate.addDays(a).getTime()<=betweenDate.max){var c=newDate.addDays(a);newDate=c;a=c.getFullYear();var b=9>c.getMonth()?"0"+Number(c.getMonth()+1):Number(c.getMonth()+1);c=9>c.getDate()?"0"+c.getDate():c.getDate();a=a+"-"+b+"-"+c;getFreePos(a);getOpenHours(a);$("#currentDate").text(a)}};
