var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};var gameTypes="B2 B3 B4 B5 B6 B7 D1 D2".split(" "),daysName="Vas\u00e1rnap H\u00e9tf\u0151 Kedd Szerda Cs\u00fct\u00f6rt\u00f6k P\u00e9ntek Szombat".split(" "),gHours=[],allDays=[],freeDays=[],date,newDate=new Date,gDay,betweenDate=[],dayOffs=[];function accepted(){$(".footer-blocking").hide();$(".footer").hide()}
$(document).ready(function(){$(".backarrow").css("display","none");$(".datearrow").css("display","none");getFreeDays();bookingDate=date;var a=new Date,b=a.getFullYear(),c=a.getMonth();a.getDate();a=9<c?c+1:"0"+(c+1);$("#currentDate").text(b+"-"+a);renderDays(b,c)});Date.prototype.addDays=function(a){var b=new Date(this.valueOf());b.setDate(b.getDate()+a);return b};
function renderDays(a,b){setTimeout(function(){$(".calendar-content");$(".calendar-content").html("");var a=new Date;betweenDate.min=a.addDays(-1).getTime();betweenDate.max=a.addDays(14).getTime();for(var b=0;15>b;b++){var d=a.addDays(b),g=void 0==daysName[d.getDay()]?"H\u00e9tf\u0151":daysName[d.getDay()],f=9>d.getMonth()?"0"+Number(d.getMonth()+1):Number(d.getMonth()+1),k=9>d.getDate()?"0"+d.getDate():d.getDate(),l=d.getFullYear()+"-"+f+"-"+k,h;for(h=0;h<dayOffs.length;h++)if(dayOffs[h]==l){$(".calendar-content").append('\n                    <div class="c-block" ><p >Szabadnap</p></div>\n                    ');
break}l!=dayOffs[h]&&$(".calendar-content").append('\n                <div class="c-block" onclick="selectDay('+Number(d.getMonth()+1)+","+d.getDate()+')" ><p style="margin:0.2em" >'+f+"."+k+"</br>"+g+"</p></div>\n                ")}},100)}
var selectDay=function(a,b){$(".backarrow").css("display","block");$(".datearrow").css("display","block");gDay=b;date=(new Date).getFullYear()+"-"+(9>a?"0"+a:a)+"-"+(9>b?"0"+b:b);newDate=new Date(date);$(".calendar-content").html("");$(".calendar-content").addClass("calendar-times").removeClass("calendar-content");getFreePos(date);getOpenHours(date);$("#currentDate").text(date)};
function getOpenHours(a){gHours=[];a=(new Date(a)).getDay();$.post(apiUrl+"getOpenHours.php",{day:a},function(a,c){var b=Number(a.opening),d=a.closing;d=b>d?24-Number(b)+Number(d-1):d-b;for(var g=0;g<d;g+=2){var f=new Date;f.setHours(Number(b)+g);f=f.getHours();gHours.push(f)}})}
function back(){var a=new Date,b=a.getFullYear(),c=a.getMonth();a.getDate();$(".backarrow").css("display","none");$(".datearrow").css("display","none");c=9>c?"0"+Number(c+1):Number(c+1);a=b+"-"+c;$("#currentDate").text(a);$(".calendar-times").html("");$(".calendar-times").addClass("calendar-content").removeClass("calendar-times");renderDays(b,c)}
function getFreePos(a){$.ajax({type:"POST",url:apiUrl+"getReservations.php",data:"data="+JSON.stringify({date:a}),dataType:"JSON",success:function(a){for(var b=[],e=0;e<a.length;e++)b.push({time:Number(a[e].time),gameType:a[e].gameType,free:a[e].free});generateDay(b)},error:function(a){console.log(a)}})}function generateDay(a){setTimeout(function(){for(var b=[],c=0;c<gHours.length;c++)for(var e=0;e<gameTypes.length;e++)b.push({time:gHours[c],gameType:gameTypes[e]});generateFreeDays(b,a)},100)}
function generateFreeDays(a,b){freeDays=[];for(var c=0;c<a.length;c++)for(var e=0;e<b.length;e++)a[c].gameType==b[e].gameType&&a[c].time==b[e].time&&(a[c].free=!1);freeDays=a;generateHtml()}
function generateHtml(){$(".calendar-times").html("");if(0==gHours.length)$(".calendar-times").html("<h3>Ma sajnos z\u00e1rva van</h3>");else{for(var a=0;a<gHours.length;a++)25==Number(gHours[a]+1)?$(".calendar-times").append('\n                <div class="times-table">\n                    <div class="time">\n                        <p>'+gHours[a]+":00  -  1:00</p>\n                    </div>\n                 </div>"):$(".calendar-times").append('\n                <div class="times-table">\n                    <div class="time">\n                        <p>'+
gHours[a]+":00  - "+Number(gHours[a]+2)+":00</p>\n                    </div>\n                 </div>");for(a={$jscomp$loop$prop$i$3$5:0};a.$jscomp$loop$prop$i$3$5<gHours.length;a={$jscomp$loop$prop$i$3$5:a.$jscomp$loop$prop$i$3$5},a.$jscomp$loop$prop$i$3$5++)freeDays.forEach(function(a){return function(b){Number(b.time)===Number(gHours[a.$jscomp$loop$prop$i$3$5])&&(0==b.free?$(".times-table:nth-child("+(a.$jscomp$loop$prop$i$3$5+1)+")").append("<div style = 'background-color:red' class='game-type' onclick = 'alert(`Ez a hely sajnos m\u00e1r foglalt!`)' ><p>"+
b.gameType+"</p></div > "):$(".times-table").eq(a.$jscomp$loop$prop$i$3$5).append("<div class= 'game-type' onclick='getBookingData(`"+b.gameType+"`,"+b.time+")' ><p>"+b.gameType+"</p></div > "))}}(a))}}
function changeCurrentDate(a){if(newDate.addDays(a).getTime()>=betweenDate.min&&newDate.addDays(a).getTime()<=betweenDate.max){var b=newDate.addDays(a);newDate=b;a=b.getFullYear();var c=9>b.getMonth()?"0"+Number(b.getMonth()+1):Number(b.getMonth()+1);b=9>b.getDate()?"0"+b.getDate():b.getDate();a=a+"-"+c+"-"+b;for(c=0;c<dayOffs.length&&dayOffs[c]!=a;)c++;dayOffs[c]==a?($("#currentDate").text(a),$(".calendar-times").text("Szabadnap")):(getFreePos(a),getOpenHours(a),$("#currentDate").text(a))}}
function getFreeDays(a){$.ajax({type:"POST",url:apiUrl+"getFreeDays.php",data:"data="+JSON.stringify({date:a,all:!0}),dataType:"JSON",success:function(a){for(var b=0;b<a.length;b++)dayOffs.push(a[b].date)},error:function(a){console.log("Res:",a)}})};