var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};var gameTypes="B2 B3 B4 B5 B6 B7 D1 D2".split(" "),daysName=[""],gHours=[],allDays=[],freeDays=[],date,gDay,betweenDate=[];
function getScheduleRendered(){setTimeout(function(){if(sessionStorage.date){var a=new Date(sessionStorage.date),b=a.getFullYear(),c=9>a.getMonth()?"0"+Number(a.getMonth()+1):Number(a.getMonth()+1),d=9>a.getDate()?"0"+a.getDate():a.getDate(),e=0==a.getDay()?6:Math.abs(a.getDay()-1);date=b=b+"-"+c+"-"+d;$("#newdate").val(b);for(b=0;b<daysOff.length&&daysOff[b]!=date;)b++;daysOff[b]!=date?selectDay(a.getDate()):($(".calendar-content").addClass("calendar-times").removeClass("calendar-content"),$(".calendar-times").text("Szabadnap"));
$("#current-day").text(days[e])}else{a=new Date;b=a.getFullYear();c=9>a.getMonth()?"0"+Number(a.getMonth()+1):Number(a.getMonth()+1);d=9>a.getDate()?"0"+a.getDate():a.getDate();e=0==a.getDay()?6:Math.abs(a.getDay()-1);date=b=b+"-"+c+"-"+d;$("#newdate").val(b);for(c=0;c<daysOff.length&&daysOff[c]!=date;)c++;daysOff[c]!=date?selectDay(a.getDate()):($(".calendar-content").addClass("calendar-times").removeClass("calendar-content"),$(".calendar-times").text("Szabadnap"));$("#currentDate").text(b);$("#current-day").text(days[e])}},
100)}function renderDays(a,b){$(".calendar-content");$(".calendar-content").html("");for(var c=new Date(a,b,0),d=1;d<c.getDate()+1;d++)$(".calendar-content").append('\n    <div class="c-block" onclick="selectDay('+d+')" ><p style="margin:0.5em" >'+d+"</p></div>\n    ")}
var selectDay=function(a){a=new Date(date||sessionStorage.date);var b=a.getFullYear(),c=9>a.getMonth()?"0"+(a.getMonth()+1):a.getMonth()+1,d=9>a.getDate()?"0"+Number(a.getDate()):Number(a.getDate());date=b+"-"+c+"-"+d;$(".calendar-content").html("");$(".calendar-content").addClass("calendar-times").removeClass("calendar-content");getFreePos(date);getOpenHoursWithParam(a.getDay())};
function selectDayOther(a){$(".calendar-times").html("");$(".calendar-content").html("");$(".calendar-content").addClass("calendar-times").removeClass("calendar-content");getFreePos(a);getOpenHoursWithParam(a.getDay())}function getOpenHours(a){gHours=[];$.post(apiUrl+"getOpenHours.php",{day:(new Date).getDay()},function(a,c){var b=Number(a.opening),e=a.closing;e=b>e?24-Number(b)+Number(e):e-b;for(var g=0;g<e;g+=2){var f=new Date;f.setHours(Number(b)+g);f=f.getHours();gHours.push(f)}})}
function back(){var a=new Date,b=a.getFullYear(),c=a.getMonth();a.getDate();$(".calendar-times").html("");$(".calendar-times").addClass("calendar-content").removeClass("calendar-times");renderDays(b,c)}
function getFreePos(a){$.ajax({type:"POST",url:apiUrl+"getAdminReservations.php",data:"data="+JSON.stringify({date:a}),dataType:"JSON",success:function(a){for(var c=[],b=0;b<a.length;b++)c.push({time:Number(a[b].time),name:a[b].name,email:a[b].email,phone:a[b].phone,gameType:a[b].gameType,coupon:a[b].coupon,desc:a[b].desc,free:a[b].free,rank:a[b].rank});generateDay(c)},error:function(a){console.log(a)}})}
function generateDay(a){setTimeout(function(){for(var b=[],c=0;c<gHours.length;c++)for(var d=0;d<gameTypes.length;d++)b.push({time:gHours[c],gameType:gameTypes[d]});generateFreeDays(b,a)},100)}
function generateFreeDays(a,b){freeDays=[];for(var c=0;c<a.length;c++)for(var d=0;d<b.length;d++)a[c].gameType==b[d].gameType&&a[c].time==b[d].time&&(a[c].free=!1,a[c].name=b[d].name,a[c].email=b[d].email,a[c].phone=b[d].phone,a[c].coupon=b[d].coupon,a[c].desc=b[d].desc,a[c].rank=b[d].rank);freeDays=a;generateHtml()}
function generateHtml(){$(".calendar-times").html("");$(".times-table").html("");if(0==gHours.length)$(".calendar-times").html("<h3>Ma z\u00e1rva van</h3>");else{for(var a=0;a<gHours.length;a++)25==Number(gHours[a]+1)?$(".calendar-times").append('\n                <div class="times-table">\n                    <div class="time">\n                        <p>'+gHours[a]+":00  -  02:00</p>\n                    </div>\n                 </div>"):$(".calendar-times").append('\n                <div class="times-table">\n                    <div class="time">\n                        <p>'+
gHours[a]+":00  - "+Number(gHours[a]+2)+":00</p>\n                    </div>\n                 </div>");for(a={$jscomp$loop$prop$i$8$10:0};a.$jscomp$loop$prop$i$8$10<gHours.length;a={$jscomp$loop$prop$i$8$10:a.$jscomp$loop$prop$i$8$10},a.$jscomp$loop$prop$i$8$10++)freeDays.forEach(function(a){return function(c,b){if(Number(c.time)===Number(gHours[a.$jscomp$loop$prop$i$8$10]))if(0==c.free)switch(Number(c.rank)){case 1:"B"==c.gameType.substr(0,1)?c.coupon?$(".times-table:nth-child("+(a.$jscomp$loop$prop$i$8$10+
1)+")").append("<div style = 'background-color:#00ff71;border:3px solid red' title='N\u00e9v: "+c.name+"' class= 'game-type' onclick='getScheduleInfo("+b+")'><p>"+c.gameType+"</p></div > "):$(".times-table:nth-child("+(a.$jscomp$loop$prop$i$8$10+1)+")").append("<div style = 'background-color:#00ff71' title='N\u00e9v: "+c.name+"' class= 'game-type' onclick='getScheduleInfo("+b+")'><p>"+c.gameType+"</p></div > "):c.coupon?$(".times-table:nth-child("+(a.$jscomp$loop$prop$i$8$10+1)+")").append("<div style = 'background-color:#6be0b5;border:3px solid red' title='N\u00e9v: "+
c.name+"' class= 'game-type' onclick='getScheduleInfo("+b+")'><p>"+c.gameType+"</p></div > "):$(".times-table:nth-child("+(a.$jscomp$loop$prop$i$8$10+1)+")").append("<div style = 'background-color:#6be0b5' title='N\u00e9v: "+c.name+"' class= 'game-type' onclick='getScheduleInfo("+b+")'><p>"+c.gameType+"</p></div > ");break;case 2:"B"==c.gameType.substr(0,1)?c.coupon?$(".times-table:nth-child("+(a.$jscomp$loop$prop$i$8$10+1)+")").append("<div style = 'background-color:lightblue;border:3px solid red' title='N\u00e9v: "+
c.name+"' class= 'game-type' onclick='getScheduleInfo("+b+")'><p>"+c.gameType+"</p></div > "):$(".times-table:nth-child("+(a.$jscomp$loop$prop$i$8$10+1)+")").append("<div style = 'background-color:lightblue' title='N\u00e9v: "+c.name+"' class= 'game-type' onclick='getScheduleInfo("+b+")'><p>"+c.gameType+"</p></div > "):c.coupon?$(".times-table:nth-child("+(a.$jscomp$loop$prop$i$8$10+1)+")").append("<div style = 'background-color:#9b8fe0;border:3px solid red' title='N\u00e9v: "+c.name+"' class= 'game-type' onclick='getScheduleInfo("+
b+")'><p>"+c.gameType+"</p></div > "):$(".times-table:nth-child("+(a.$jscomp$loop$prop$i$8$10+1)+")").append("<div style = 'background-color:#9b8fe0' title='N\u00e9v: "+c.name+"' class= 'game-type' onclick='getScheduleInfo("+b+")'><p>"+c.gameType+"</p></div > ");break;case 3:"VIP"==c.name?$(".times-table:nth-child("+(a.$jscomp$loop$prop$i$8$10+1)+")").append("<div style = 'background-color:gold' class= 'game-type' onclick='vipInfo("+b+")'><p>"+c.gameType+"</p></div > "):c.coupon?$(".times-table:nth-child("+
(a.$jscomp$loop$prop$i$8$10+1)+")").append("<div style = 'background-color:#fdff87;border:3px solid red' title='N\u00e9v: "+c.name+"' class= 'game-type' onclick='vipInfo("+b+")'><p>"+c.gameType+"</p></div > "):$(".times-table:nth-child("+(a.$jscomp$loop$prop$i$8$10+1)+")").append("<div style = 'background-color:#fdff87' title='N\u00e9v: "+c.name+"' class= 'game-type' onclick='vipInfo("+b+")'><p>"+c.gameType+"</p></div > ")}else $(".times-table").eq(a.$jscomp$loop$prop$i$8$10).append("<div class= 'game-type' onclick='setAdminSchedule("+
b+")' ><p>"+c.gameType+"</p></div > ")}}(a))}}$(".game-type").click(function(a){a.preventDefault()});var index;
function getScheduleInfo(a){$(".settings-panel").css("display","flex");index=a;adminGameData=freeDays[index];a=freeDays[a];$("#newGameType").val(a.gameType);$(".schedule-info").css("display","flex");$("#scheduled-info-text").html("\n        N\u00e9v: "+a.name+" <br>\n        Email: "+a.email+" <br>\n        Telefon: "+a.phone+" <br>\n        Megjegyz\u00e9s: "+a.desc+" <br>\n        Kupon k\u00f3d: "+a.coupon+"\n    ")}
function closeAdminForm(){$(".schedule-info").css("display","none");closePanel()}function getOpenHoursWithParam(a){gHours=[];$.post(apiUrl+"getOpenHours.php",{day:a},function(a,c){var b=Number(a.opening),e=a.closing;e=b>e?24-Number(b)+Number(e):e-b;for(var g=0;g<e;g+=2){var f=new Date;f.setHours(Number(b)+g);f=f.getHours();gHours.push(f)}})}
function changeCurrentDate(a){a=(new Date(date)).addDays(a);var b=a.getFullYear(),c=9>a.getMonth()?"0"+Number(a.getMonth()+1):Number(a.getMonth()+1),d=9>a.getDate()?"0"+a.getDate():a.getDate(),e=0==a.getDay()?6:Math.abs(a.getDay()-1);$("#current-day").text(days[e]);date=b=b+"-"+c+"-"+d;for(c=0;c<daysOff.length&&daysOff[c]!=b;)c++;daysOff[c]!=b?(getFreePos(b),getOpenHoursWithParam(a.getDay())):$(".calendar-times").text("Szabadnap");$("#currentDate").text(b);$("#newdate").val(b);sessionStorage.date=
date}function gohome(){var a=new Date,b=a.getFullYear(),c=9>a.getMonth()?"0"+Number(a.getMonth()+1):Number(a.getMonth()+1),d=9>a.getDate()?"0"+a.getDate():a.getDate();date=b=b+"-"+c+"-"+d;c=0==a.getDay()?6:Math.abs(a.getDay()-1);$("#current-day").text(days[c]);for(c=0;c<daysOff.length&&daysOff[c]!=b;)c++;daysOff[c]!=b?(getFreePos(b),getOpenHoursWithParam(a.getDay())):$(".calendar-times").text("Szabadnap");$("#currentDate").text(b);$("#newdate").val(b);sessionStorage.date=date}
Date.prototype.addDays=function(a){var b=new Date(this.valueOf());b.setDate(b.getDate()+a);return b};