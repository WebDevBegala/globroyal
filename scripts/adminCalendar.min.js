var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,c){a.raw=c;return a};var gameTypes="B2 B3 B4 B5 B6 B7 D1 D2".split(" "),daysName=[""],gHours=[],allDays=[],freeDays=[],date,gDay;function getScheduleRendered(){var a=new Date;a.getFullYear();a.getMonth();a.getDate();selectDay(a.getDate()-1)}
function renderDays(a,c){$(".calendar-content");$(".calendar-content").html("");for(var d=new Date(a,c,0),b=1;b<d.getDate()+1;b++)$(".calendar-content").append('\n    <div class="c-block" onclick="selectDay('+b+')" ><p style="margin:0.5em" >'+b+"</p></div>\n    ")}
var selectDay=function(a){gDay=a;var c=new Date,d=c.getFullYear();c=9>c.getMonth()?"0"+(c.getMonth()+1):c.getMonth()+1;date=d+"-"+c+"-"+(9>a?"0"+Number(a+1):Number(a+1));$(".calendar-content").html("");$(".calendar-content").addClass("calendar-times").removeClass("calendar-content");getFreePos(date);getOpenHours(date)};
function selectDayOther(a){$(".calendar-times").html("");$(".calendar-content").html("");$(".calendar-content").addClass("calendar-times").removeClass("calendar-content");getFreePos(a);getOpenHoursWithParam(a.getDay())}function getOpenHours(a){gHours=[];$.post(apiUrl+"getOpenHours.php",{day:(new Date).getDay()},function(a,d){var c=Number(a.opening),g=a.closing;g=c>g?24-Number(c)+Number(g):g-c;for(var f=0;f<g;f+=2){var e=new Date;e.setHours(Number(c)+f);e=e.getHours();gHours.push(e)}})}
function back(){var a=new Date,c=a.getFullYear(),d=a.getMonth();a.getDate();$(".calendar-times").html("");$(".calendar-times").addClass("calendar-content").removeClass("calendar-times");renderDays(c,d)}
function getFreePos(a){$.ajax({type:"POST",url:apiUrl+"getAdminReservations.php",data:"data="+JSON.stringify({date:a}),dataType:"JSON",success:function(a){for(var c=[],b=0;b<a.length;b++)c.push({time:Number(a[b].time),name:a[b].name,email:a[b].email,phone:a[b].phone,gameType:a[b].gameType,coupon:a[b].coupon,desc:a[b].desc,free:a[b].free,rank:a[b].rank});generateDay(c)},error:function(a){console.log(a)}})}
function generateDay(a){setTimeout(function(){for(var c=[],d=0;d<gHours.length;d++)for(var b=0;b<gameTypes.length;b++)c.push({time:gHours[d],gameType:gameTypes[b]});generateFreeDays(c,a)},100)}
function generateFreeDays(a,c){freeDays=[];for(var d=0;d<a.length;d++)for(var b=0;b<c.length;b++)a[d].gameType==c[b].gameType&&a[d].time==c[b].time&&(a[d].free=!1,a[d].name=c[b].name,a[d].email=c[b].email,a[d].phone=c[b].phone,a[d].coupon=c[b].coupon,a[d].desc=c[b].desc,a[d].rank=c[b].rank);freeDays=a;generateHtml()}
function generateHtml(){$(".calendar-times").html("");$(".times-table").html("");if(0==gHours.length)$(".calendar-times").html("<h3>Ma z\u00e1rva van</h3>");else{for(var a=0;a<gHours.length;a++)25==Number(gHours[a]+1)?$(".calendar-times").append('\n                <div class="times-table">\n                    <div class="time">\n                        <p>'+gHours[a]+":00  -  02:00</p>\n                    </div>\n                 </div>"):$(".calendar-times").append('\n                <div class="times-table">\n                    <div class="time">\n                        <p>'+
gHours[a]+":00  - "+Number(gHours[a]+2)+":00</p>\n                    </div>\n                 </div>");for(a={$jscomp$loop$prop$i$1$3:0};a.$jscomp$loop$prop$i$1$3<gHours.length;a={$jscomp$loop$prop$i$1$3:a.$jscomp$loop$prop$i$1$3},a.$jscomp$loop$prop$i$1$3++)freeDays.forEach(function(a){return function(d,b){if(Number(d.time)===Number(gHours[a.$jscomp$loop$prop$i$1$3]))if(0==d.free)switch(Number(d.rank)){case 1:"B"==d.gameType.substr(0,1)?$(".times-table:nth-child("+(a.$jscomp$loop$prop$i$1$3+1)+
")").append("<div style = 'background-color:orange' title='N\u00e9v: "+d.name+"' class= 'game-type' onclick='getScheduleInfo("+b+")'><p>"+d.gameType+"</p></div > "):$(".times-table:nth-child("+(a.$jscomp$loop$prop$i$1$3+1)+")").append("<div style = 'background-color:yellow' title='N\u00e9v: "+d.name+"' class= 'game-type' onclick='getScheduleInfo("+b+")'><p>"+d.gameType+"</p></div > ");break;case 2:"B"==d.gameType.substr(0,1)?$(".times-table:nth-child("+(a.$jscomp$loop$prop$i$1$3+1)+")").append("<div style = 'background-color:lightblue' title='N\u00e9v: "+
d.name+"' class= 'game-type' onclick='getScheduleInfo("+b+")'><p>"+d.gameType+"</p></div > "):$(".times-table:nth-child("+(a.$jscomp$loop$prop$i$1$3+1)+")").append("<div style = 'background-color:lightgreen' title='N\u00e9v: "+d.name+"' class= 'game-type' onclick='getScheduleInfo("+b+")'><p>"+d.gameType+"</p></div > ");break;case 3:$(".times-table:nth-child("+(a.$jscomp$loop$prop$i$1$3+1)+")").append("<div style = 'background-color:gold' class= 'game-type' onclick='vipInfo("+b+")'><p>"+d.gameType+
"</p></div > ")}else $(".times-table").eq(a.$jscomp$loop$prop$i$1$3).append("<div class= 'game-type' onclick='setAdminSchedule("+b+")' ><p>"+d.gameType+"</p></div > ")}}(a))}}$(".game-type").click(function(a){a.preventDefault();console.log(a)});var index;
function getScheduleInfo(a){$(".settings-panel").css("display","flex");index=a;adminGameData=freeDays[index];a=freeDays[a];$("#newGameType").val(a.gameType);$(".schedule-info").css("display","flex");$("#scheduled-info-text").html("\n        N\u00e9v: "+a.name+" <br>\n        Email: "+a.email+" <br>\n        Telefon: "+a.phone+" <br>\n        Megjegyz\u00e9s: "+a.desc+" <br>\n        Kupon k\u00f3d: "+a.coupon+"\n    ")}
function closeAdminForm(){$(".schedule-info").css("display","none");closePanel()}function getOpenHoursWithParam(a){gHours=[];console.log(gHours);$.post(apiUrl+"getOpenHours.php",{day:a},function(a,d){var b=Number(a.opening),c=a.closing;c=b>c?24-Number(b)+Number(c):c-b;for(var f=0;f<c;f+=2){var e=new Date;e.setHours(Number(b)+f);e=e.getHours();gHours.push(e)}})};